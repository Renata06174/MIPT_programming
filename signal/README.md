Модифицируйте программу с pipe, организовав двустороннюю поочередную связь родителя и ребенка, используя синхронизацию через сигналы
SIGUSR1, SIGUSR2
